# フィラー語検出アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
音声フィラー語検出・改善支援アプリ

### 1.2 目的
音声からフィラー語を検出し、話し方改善をサポートするiOSアプリの開発

### 1.3 ターゲット
- プレゼンテーション能力を向上させたいビジネスパーソン
- 面接対策をしたい求職者
- 日常的な話し方を改善したい一般ユーザー
- 本格的な話し方スクールまでは必要としないライトユーザー

### 1.4 プラットフォーム
- iOS 17+
- iPhone対応（iPad対応は将来検討）

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 音声録音・アップロード機能
**機能概要：** ユーザーの音声を録音、または既存音声ファイルをアップロード

**詳細仕様：**
- リアルタイム音声録音（最大10分）
- 対応ファイル形式：m4a, wav, mp3
- 録音中の視覚的フィードバック（波形表示）
- 録音時間・残り時間表示
- 音声品質の事前チェック
- バックグラウンド録音対応
- マイク権限管理
- ストレージ容量チェック・警告

**入力：** マイクからの音声入力、または音声ファイル  
**出力：** 録音済み音声データ

#### 2.1.2 音声分析（フィラー語検出・カウント）
**機能概要：** 音声を解析してフィラー語を自動検出・分類

**詳細仕様：**
- OpenAI Whisper APIによる文字起こし
- GPT-4 APIによるフィラー語検出・分類
- 検出対象フィラー語：「えー」「あー」「その」「あの」「えっと」「まあ」「なんか」「ちょっと」「やっぱり」
- フィラー語種別カウント
- 1分あたりフィラー率計算
- 発話速度分析
- 検出位置・タイミング記録
- 信頼度スコア算出

**入力：** 音声データ  
**出力：** 分析結果データ（FillerAnalysisResult）

#### 2.1.3 結果表示・データ管理
**機能概要：** 分析結果の表示と履歴データの管理

**詳細仕様：**
- 分析結果の即座表示（フィラー語数、種別内訳）
- 前回との比較表示（改善/悪化判定）
- 時系列グラフ表示（週次・月次トレンド）
- 録音セッション履歴一覧
- データフィルタリング・検索機能
- 個別セッション詳細表示
- データ削除・編集機能
- レポート生成（PDF/CSV出力）

**入力：** 分析結果データ、ユーザー操作  
**出力：** 可視化された結果、レポートファイル

#### 2.1.4 フィラー語設定・カスタマイズ
**機能概要：** 検出するフィラー語の設定とカスタマイズ

**詳細仕様：**
- デフォルトフィラー語セット提供
- カスタムフィラー語の追加・削除
- フィラー語カテゴリ分類
- 検出感度調整（低・中・高）
- 言語設定（日本語・英語）
- 業界特有フィラー語テンプレート

**入力：** ユーザー設定、カスタムフィラー語  
**出力：** 更新された検出設定

### 2.2 価値創造機能

#### 2.2.1 改善提案・アドバイス機能
**機能概要：** 個人の分析結果に基づく改善提案の提供

**詳細仕様：**
- フィラー種別別改善方法の提示
- 検出パターンに基づく個別アドバイス
- 即効性のあるテクニック紹介
- 段階的改善プラン作成
- シチュエーション別対策提案
- GPT-4による動的アドバイス生成
- ユーザー履歴に基づく個別化
- 改善難易度・期待効果の表示
- Note記事連携（外部コンテンツ）

**入力：** 分析結果、ユーザー履歴  
**出力：** パーソナライズされた改善提案

#### 2.2.2 進捗トラッキング・比較分析
**機能概要：** 時系列での改善状況の追跡と分析

**詳細仕様：**
- 改善率の自動計算・表示
- ベースライン vs 現在比較
- 週次・月次トレンド分析
- 目標達成状況の可視化
- 改善スピード分析
- 過去録音との詳細比較
- 統計的有意性判定
- パフォーマンス推移予測
- 改善レコメンデーション

**入力：** 複数セッションの分析データ  
**出力：** 進捗レポート、比較分析結果

### 2.3 ビジネス機能

#### 2.3.1 課金・プレミアム機能
**機能概要：** サブスクリプション課金とプレミアム機能の提供

**Free Plan制限：**
- 月5回まで分析
- 基本統計のみ表示
- 履歴30日間保持
- 広告表示
- 基本アドバイスのみ

**Premium Plan機能（¥480/月）：**
- 無制限分析
- 詳細レポート・高度統計
- 履歴無制限保持
- 広告非表示
- 高度なパーソナライズアドバイス
- データエクスポート機能
- 優先サポート
- ベータ機能先行アクセス

**技術仕様：**
- StoreKit 2使用
- サブスクリプション自動更新
- 購入復元機能
- 価格表示の地域対応
- プロモーションコード対応

#### 2.3.2 オンボーディング・チュートリアル
**機能概要：** 新規ユーザーの初回体験最適化

**詳細仕様：**
- アプリ価値説明（3-4画面）
- デモ録音体験（30秒サンプル）
- サンプル分析結果表示
- 改善効果シミュレーション
- 初回目標設定ガイド
- 権限要求・説明（マイク、通知）
- プライバシーポリシー表示
- 利用規約同意
- インタラクティブ機能ツアー
- 段階的機能解放

#### 2.3.3 通知・リマインダー機能
**機能概要：** ユーザーエンゲージメント維持のための通知システム

**通知種類：**
- 練習リマインダー（カスタム頻度）
- 目標達成・マイルストーン通知
- 週次進捗レポート配信
- 新機能・アップデート案内
- モチベーション向上メッセージ
- 連続利用ストリーク通知

**設定オプション：**
- 通知時間のカスタマイズ
- 通知頻度調整（日次・週次・月次）
- 通知内容の選択
- サイレント時間設定
- 一時停止機能

## 3. 画面構成・遷移

### 3.1 画面一覧

#### 3.1.1 オンボーディング画面群
**目的：** 新規ユーザーの初回体験最適化  
**画面数：** 4-5画面  
**遷移条件：** 初回起動時のみ表示

**画面構成：**

1. **ウェルカム画面**
   - アプリ名・ロゴ表示
   - 「はじめる」ボタン
   - 「スキップ」リンク

2. **価値説明画面**
   - アプリの効果・価値提示
   - 使用前後の比較例
   - 「次へ」「戻る」ボタン

3. **デモ体験画面**
   - 簡単録音デモ（30秒）
   - サンプル分析結果表示
   - 「実際に試す」ボタン

4. **権限要求画面**
   - マイク権限説明・要求
   - 通知権限説明・要求
   - プライバシー説明リンク

5. **初期設定画面**
   - 目標設定（週次フィラー語目標）
   - 通知設定
   - 「完了して開始」ボタン

#### 3.1.2 ホーム画面（メイン画面）
**目的：** アプリの中心ハブ、主要機能へのアクセス

**表示要素：**
- 大きな「録音開始」ボタン（プライマリーアクション）
- 今週の進捗サマリー（改善率、目標達成状況）
- 最近の録音履歴（直近3-5件）
- クイック統計（平均フィラー数、ストリーク日数）
- タブナビゲーション（ホーム、履歴、分析、設定）

**操作項目：**
- 録音開始ボタン → 録音画面遷移
- 履歴項目タップ → 詳細結果画面遷移
- 進捗グラフタップ → 詳細分析画面遷移
- タブ切り替え

#### 3.1.3 録音画面
**目的：** 音声録音の実行とリアルタイムフィードバック

**表示要素：**
- 録音状態インジケーター（録音中/停止中）
- 経過時間表示
- 残り時間表示（Free版は制限表示）
- リアルタイム音声波形
- 音量レベルメーター
- 録音開始/停止ボタン
- キャンセルボタン
- 音声ファイルインポートボタン

**操作項目：**
- 録音開始/停止
- キャンセル → ホーム画面復帰
- 録音完了 → 分析処理画面遷移
- ファイルインポート → ファイル選択画面

#### 3.1.4 分析処理画面
**目的：** 音声分析中の待機画面

**表示要素：**
- プログレスインジケーター
- 分析状況メッセージ（文字起こし中、フィラー検出中等）
- 推定残り時間
- キャンセルボタン

**操作項目：**
- キャンセル → ホーム画面復帰
- 分析完了 → 結果画面遷移

#### 3.1.5 結果画面
**目的：** 分析結果の表示と次のアクションへの誘導

**表示要素：**
- フィラー語総数（大きく表示）
- 前回比較（改善/悪化の明示）
- フィラー語種別内訳（円グラフ）
- 改善アドバイス（2-3個）
- 詳細分析ボタン
- 「次の録音」ボタン
- シェアボタン

**操作項目：**
- 詳細分析 → 詳細分析画面遷移
- 次の録音 → 録音画面遷移
- シェア → 共有シート表示
- アドバイス詳細 → アドバイス画面遷移

#### 3.1.6 詳細分析画面
**目的：** 深い分析結果と進捗状況の表示

**表示要素：**
- 時系列グラフ（週次・月次切り替え）
- フィラー語種別トレンド
- 統計情報（平均、最良、改善率）
- 目標達成状況
- 比較分析結果
- エクスポートボタン（Premium機能）

**操作項目：**
- グラフ期間切り替え
- データエクスポート（Premium）
- 個別セッション詳細表示

#### 3.1.7 履歴画面
**目的：** 過去の録音セッション一覧と管理

**表示要素：**
- 録音セッション一覧（日付、時間、フィラー数）
- 並び替えオプション（日付、フィラー数）
- フィルター機能（期間、改善/悪化）
- 検索バー
- 削除・編集アクション

**操作項目：**
- セッション選択 → 詳細結果画面遷移
- 並び替え・フィルター適用
- 削除・編集アクション実行
- 検索実行

#### 3.1.8 設定画面
**目的：** アプリの各種設定とアカウント管理

**表示要素：**
- プロフィール情報
- 課金状況・プラン変更
- フィラー語設定
- 通知設定
- 目標設定
- データ管理（削除、エクスポート）
- ヘルプ・サポート
- プライバシーポリシー・利用規約

**操作項目：**
- 各設定項目の編集
- プラン変更 → 課金画面遷移
- データ管理操作
- ヘルプ・サポートアクセス

#### 3.1.9 課金画面
**目的：** プレミアムプランの説明と購入

**表示要素：**
- プラン比較表（Free vs Premium）
- 機能詳細説明
- 料金表示
- 購入ボタン
- 復元ボタン
- 利用規約リンク

**操作項目：**
- プラン購入実行
- 購入復元
- プラン詳細表示

### 3.2 画面遷移図
```
オンボーディング → ホーム ← ← ← ← ← ← ← 
                    ↓                 ↑
                   録音 → 分析処理 → 結果
                    ↓         ↑       ↓
                ファイル選択   ↑   詳細分析
                              ↑       ↓
履歴 ← → ホーム ← → 分析 ← → 設定 → 課金
 ↓        ↑        ↑       ↓
詳細結果   ↑        ↑   各種設定
           ↑        ↑
       アドバイス ← ←
```

## 4. ユーザーフロー

### 4.1 メインフロー

#### 4.1.1 初回利用フロー
1. アプリ起動
2. オンボーディング画面表示
   - 価値説明（3画面）
   - デモ体験
   - 権限要求
3. 初期設定
   - 目標設定
   - 通知設定
4. ホーム画面表示
5. 初回録音実行
   - 録音説明
   - 録音実行（30秒程度）
   - 分析実行
6. 結果画面表示
   - 成果の説明
   - 改善アドバイス表示
   - 継続利用への誘導

#### 4.1.2 通常利用フロー
1. アプリ起動
2. ホーム画面表示
   - 進捗確認
   - 前回からの変化確認
3. 録音実行
   - 「録音開始」タップ
   - 音声録音（1-10分）
   - 録音停止
4. 分析処理
   - 音声アップロード
   - 文字起こし実行
   - フィラー語検出
5. 結果確認
   - フィラー語数確認
   - 前回比較確認
   - 改善アドバイス確認
6. 次のアクション選択
   - 詳細分析確認
   - 再録音実行
   - アドバイス詳細確認
   - アプリ終了

#### 4.1.3 進捗確認フロー
1. ホーム画面から分析タップ
2. 詳細分析画面表示
   - 週次トレンド確認
   - 月次トレンド確認
   - 目標達成状況確認
3. 個別セッション詳細
   - 特定録音の詳細分析
   - 改善ポイント確認
   - 比較分析実行
4. 今後のアクション決定
   - 目標調整
   - 練習計画更新
   - 継続記録

### 4.2 サブフロー

#### 4.2.1 課金フロー
1. プレミアム機能アクセス
   - 制限画面表示
   - 「プレミアムにアップグレード」タップ
2. 課金画面表示
   - プラン比較確認
   - 機能詳細確認
   - 料金確認
3. 購入実行
   - 「購入」ボタンタップ
   - App Store認証
   - 購入完了
4. プレミアム機能有効化
   - 制限解除
   - 高度機能アクセス可能
   - 確認画面表示

#### 4.2.2 設定変更フロー
1. 設定画面アクセス
2. 設定項目選択
   - フィラー語設定
   - 通知設定
   - 目標設定
   - データ管理
3. 設定変更実行
   - 値の変更
   - 確認・保存
   - 反映確認
4. 設定完了
   - 設定画面復帰 or ホーム復帰

#### 4.2.3 データエクスポートフロー
1. 詳細分析画面からエクスポート選択
2. エクスポート形式選択
   - PDF レポート
   - CSV データ
   - 画像（グラフ）
3. データ生成・処理
   - レポート作成
   - ファイル生成
4. 共有・保存選択
   - メール送信
   - クラウド保存
   - 他アプリ共有
   - ローカル保存

### 4.3 エラーフロー

#### 4.3.1 録音エラーフロー
**録音開始時エラー:**
- **マイク権限なし**
  - 権限要求画面表示
  - 設定アプリへ誘導
  - 権限付与後に録音復帰
- **ストレージ不足**
  - 容量不足警告表示
  - 古いデータ削除提案
  - 容量確保後に録音復帰
- **デバイスエラー**
  - エラーメッセージ表示
  - デバイス再起動提案
  - サポート連絡先表示

#### 4.3.2 分析エラーフロー
**API通信エラー:**
- **ネットワーク接続なし**
  - オフライン状態通知
  - 接続復旧待ち
  - 手動再試行ボタン
- **API制限到達**
  - 制限説明表示
  - プレミアム誘導
  - 制限リセット時間表示
- **API障害**
  - 一時的障害通知
  - 再試行提案
  - サポート連絡先表示
- **音声品質不良**
  - 品質改善アドバイス
  - 再録音提案
  - 設定調整ガイド

#### 4.3.3 課金エラーフロー
**購入エラー:**
- **App Store接続エラー**
  - 接続確認依頼
  - 再試行ボタン
  - 後で試すオプション
- **支払い方法エラー**
  - 支払い方法確認依頼
  - App Store設定誘導
  - サポート連絡先表示
- **既に購入済み**
  - 復元機能提示
  - 復元実行
  - 状態確認
- **年齢制限・地域制限**
  - 制限説明表示
  - 代替手段提示